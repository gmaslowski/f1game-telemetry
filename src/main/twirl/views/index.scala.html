@()(implicit r: Request[_])
<!DOCTYPE html>

<html>
<head>
    <title>F1 Telemetry Dashboard</title>
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">
</head>
<body>

<div id="content" style="font-family: 'Orbitron', sans-serif; text-align: center; margin-left: auto;margin-right: auto;">
    <div id="speed" style="font-size: 25px; width: 200px; margin: 0px auto; margin-bottom: 30px;"></div>
    <div>
        <div id="gauge" class="200x160px"></div>
    </div>
    <div id="gear" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    <div id="tyre_compound" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    <div id="team" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    <div>
        <div>Sector 1</div>
        <div id="sector_1" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    </div>
    <div>
        <div>Sector 2</div>
        <div id="sector_2" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    </div>
    <div>
        <div>Lap</div>
        <div id="lap" style="font-size: 30px; width: 200px; margin: 0px auto; margin-top: 30px;"></div>
    </div>
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/justgage/1.2.9/justgage.min.js"></script>
<script type="text/javascript">

var g = null;
var init = true;
var ws = new WebSocket("ws://localhost:9000/ws");

ws.onopen = function(){};
ws.onmessage = function (evt)
{
    var json = JSON.parse(evt.data);

    if(json.dataType === 'LiveData') {
        document.getElementById("speed").innerHTML = json.speed + " kmh";
        document.getElementById("gear").innerHTML = json.gear;
        document.getElementById("sector_1").innerHTML = json.sector_1;
        document.getElementById("sector_2").innerHTML = json.sector_2;
        document.getElementById("lap").innerHTML = json.lap;
        if(g != null) {
            g.refresh(json.revs); // set actual value
        }
    }

    if(json.dataType === 'CarConfiguration') {
        document.getElementById("tyre_compound").innerHTML = json.tyre.compoundName;
        document.getElementById("team").innerHTML = json.team.teamName;

        if(init == true && json.engine.maxRevs != 0) {
            g = new JustGage({
                id: "gauge",
                value: 0,
                min: json.engine.idleRevs,
                max: json.engine.maxRevs,
                title: "Revs",
                titleFontFamily: "Orbitron",
                valueFontFamily: "Orbitron"
            });
            init = false;
        }
    }
};

ws.onclose = function(){};

window.onbeforeunload = function(event) { socket.close();};

</script>
</body>
</html>